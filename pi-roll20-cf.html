<div class="stats">

  <div class="name" >
    <h1>Name:</h1>
  </div>
  <div class="name_query" >
      <input class="name" name="attr_character_name" spellcheck="false" type="text" />
  </div>

  <div class="plotpoints" >
    <h2>Plot Points</h2>
  </div>
  <div class="ppcounter" >
      <input name="attr_pp" min="0" placeholder="0" type="number" />
  </div>

  <div class="dicepool" >
    <h2>Dice Pool</h2>
  </div>

    <div class="d4roll" >
      <button name="d4roll" type="roll" value="/roll d4" >
        D4
      </button>
        <input name="attr_d4pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d6roll" >
      <button name="d6roll" type="roll" value="/roll d6" >
        D6
      </button>
        <input name="attr_d6pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d8roll" >
      <button name="d8roll" type="roll" value="/roll d8" >
        D8
      </button>
        <input name="attr_d8pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d10roll" >
      <button name="d10roll" type="roll" value="/roll d10" >
        D10
      </button>
        <input name="attr_d10pool" min="0" placeholder="0" type="number" />
    </div>
    <div class="d12roll" >
      <button name="d12roll" type="roll" value="/roll d12" >
        D12
      </button>
        <input name="attr_d12pool" min="0" placeholder="0" type="number" />
    </div>

    <div class="poolbuttons" >
      <button name="rollpool" type="roll" value="/roll {[[0 + @{d4pool}]]d4 + [[0 + @{d6pool}]]d6 + [[0 + @{d8pool}]]d8 + [[0 + @{d10pool}]]d10 + [[0 + @{d12pool}]]d12}k2" >
        Roll Pool
      </button>
      <button name="act_clearpool" type="action" >
        Clear Pool
      </button>
    </div>

  <div class="distinctions" >
    <h2>Distinctions</h2>
  </div>

    <div class="dis1" >
      <input class="description" name="attr_dis1" spellcheck="false" type="text" />
    </div>

    <div class="dis1sfx">
      <fieldset class="repeating_dis1sfx">
        <input class="sub_name" name="attr_dis1sfx_name" placeholder="SFX Name" spellcheck="false" type="text" />
        <textarea class="short" name="attr_dis1sfx_desc" spellcheck="false" type="text" >SFX Description</textarea>
      </fieldset>
    </div>

    <div class="dis2" >
      <input class="description" name="attr_dis2" spellcheck="false" type="text" />
    </div>

    <div class="dis2sfx">
      <fieldset class="repeating_dis2sfx">
        <input class="sub_name" name="attr_dis2sfx_name" placeholder="SFX Name" spellcheck="false" type="text" />
        <textarea class="short" name="attr_dis2sfx_desc" spellcheck="false" type="text" >SFX Description</textarea>
      </fieldset>
    </div>

    <div class="dis3" >
      <input class="description" name="attr_dis3" spellcheck="false" type="text" />
    </div>

    <div class="dis3sfx">
      <fieldset class="repeating_dis3sfx">
        <input class="sub_name" name="attr_dis3sfx_name" placeholder="SFX Name" spellcheck="false" type="text" />
        <textarea class="short" name="attr_dis3sfx_desc" spellcheck="false" type="text" >SFX Description</textarea>
      </fieldset>
    </div>

    <div class="d4distinction">
      <button name="act_d4distinction" type="action" >
        Add D4, +1PP
      </button>
    </div>

    <div class="d8distinction">
      <button name="act_d8add" type="action" >
        Add D8
      </button>
    </div>

  <div class="values" >
    <h2>Values</h2>
  </div>
    <div class="family">
      <strong>Family</strong>
        <select class="small" name="attr_family" >
          <option value="d4">D4</option>
          <option value="d6">D6</option>
          <option value="d8">D8</option>
          <option value="d10">D10</option>
      </select>
    </div>

    <div class="history">
      <strong>History</strong>
        <select class="small" name="attr_history" >
          <option value="d4">D4</option>
          <option value="d6">D6</option>
          <option value="d8">D8</option>
          <option value="d10">D10</option>
        </select>
    </div>

    <div class="indulgence">
      <strong>Indulgence</strong>
        <select class="small" name="attr_indulgence" >
          <option value="d4">D4</option>
          <option value="d6">D6</option>
          <option value="d8">D8</option>
          <option value="d10">D10</option>
        </select>
    </div>

    <div class="reciprocity">
      <strong>Reciprocity</strong>
        <select class="small" name="attr_reciprocity" >
          <option value="d4">D4</option>
          <option value="d6">D6</option>
          <option value="d8">D8</option>
          <option value="d10">D10</option>
        </select>
    </div>

    <div class="power">
      <strong>Power</strong>
        <select class="small" name="attr_power" >
          <option value="d4">D4</option>
          <option value="d6">D6</option>
          <option value="d8">D8</option>
          <option value="d10">D10</option>
        </select>
    </div>

    <div class="valuedice">
      <button name="act_d4add" type="action" >
        Add D4
      </button>
      <button name="act_d6add" type="action" >
        Add D6
      </button>
      <button name="act_d8add" type="action" >
        Add D8
      </button>
      <button name="act_d10add" type="action" >
        Add D10
      </button>
    </div>

    <div class="relationships">
      <h2>Relationships</h2>
    </div>

      <div class="relationship_name_state">
        <fieldset class="repeating_relationships">
          <input class="sub_name" name="attr_rel_name" placeholder="Relationship" spellcheck="false" type="text" />
          <select class="small" name="attr_rel_rating" >
            <option value="d4">D4</option>
            <option value="d6">D6</option>
            <option value="d8">D8</option>
            <option value="d10">D10</option>
            <option value="d12">D12</option>
          </select>
          <input class="description" name="attr_rel_state" placeholder="Relationship Statement" spellcheck="false" type="text" />
        </fieldset>
      </div>

      <div class="relationshipbuttons">
        <button name="act_d4add" type="action" >
          Add D4
        </button>
        <button name="act_d6add" type="action" >
          Add D6
        </button>
        <button name="act_d8add" type="action" >
          Add D8
        </button>
        <button name="act_d10add" type="action" >
          Add D10
        </button>
        <button name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

    <div class="resources">
      <h2>Resources</h2>
    </div>

      <div class="resource_name_tags">
        <fieldset class="repeating_resources">
          <input class="sub_name" name="attr_res_name" placeholder="Resource" spellcheck="false" type="text" />
          <select class="small" name="attr_res_rating" >
            <option value="2d6">2D6</option>
            <option value="2d8">2D8</option>
            <option value="3d6">3D6</option>
          </select>
          <input class="description" name="attr_res_tags" placeholder="Resource Tags" spellcheck="false" type="text" />
        </fieldset>
      </div>

      <div class="resourcebuttons">
        <button name="act_d6add" type="action" >
          Add D6
        </button>
        <button name="act_d8add" type="action" >
          Add D8
        </button>
      </div>

    <div class="assets">
      <h2>Assets</h2>
    </div>

      <div class="asset_name">
        <fieldset class="repeating_assets">
          <input class="sub_name" name="attr_asset_name" placeholder="Asset" spellcheck="false" type="text" />
          <select class="small" name="attr_asset_rating" >
            <option value="d4">D4</option>
            <option value="d6">D6</option>
            <option value="d8">D8</option>
            <option value="d10">D10</option>
            <option value="d12">D12</option>
          </select>
        </fieldset>
      </div>

      <div class="assetbuttons">
        <button name="act_createasset" type="action" >
          Create Asset: -1PP
        </button>
        <button name="act_d4add" type="action" >
          Add D4
        </button>
        <button name="act_d6add" type="action" >
          Add D6
        </button>
        <button name="act_d8add" type="action" >
          Add D8
        </button>
        <button name="act_d10add" type="action" >
          Add D10
        </button>
        <button name="act_d12add" type="action" >
          Add D12
        </button>
      </div>

        <div class="poolbuttons_b" >
         <button name="rollpool" type="roll" value="/roll {[[0 + @{d4pool}]]d4 + [[0 + @{d6pool}]]d6 + [[0 + @{d8pool}]]d8 + [[0 + @{d10pool}]]d10 + [[0 + @{d12pool}]]d12}k2" >
           Roll Pool
         </button>
         <button name="act_clearpool" type="action" >
           Clear Pool
         </button>
        </div>

         <div class="d4roll_b" >
             <strong>D4:</strong>
             <input name="attr_d4pool" min="0" placeholder="0" type="number" />
         </div>
         <div class="d6roll_b" >
             <strong>D6:</strong>
             <input name="attr_d6pool" min="0" placeholder="0" type="number" />
         </div>
         <div class="d8roll_b" >
             <strong>D8:</strong>
             <input name="attr_d8pool" min="0" placeholder="0" type="number" />
         </div>
         <div class="d10roll_b" >
             <strong>D10:</strong>
             <input name="attr_d10pool" min="0" placeholder="0" type="number" />
         </div>
         <div class="d12roll_b" >
             <strong>D12:</strong>
             <input name="attr_d12pool" min="0" placeholder="0" type="number" />
         </div>
         
  <div class="bio">
    <h2>Bio</h2>
    <textarea class="tall_n_wide" name="attr_bio" spellcheck="false"></textarea>
  </div>
</div>


<script type="text/worker">

// make the "Clear Pool" buttons work
  on("clicked:clearpool", function() {
    getAttrs(["d4pool", "d6pool", "d8pool", "d10pool", "d12pool"], function(values) {
      setAttrs({
        d4pool: 0,
        d6pool: 0,
        d8pool: 0,
        d10pool: 0,
        d12pool: 0
      });
    });
  });

// makes the "d4 Distinction" button work
  on("clicked:d4distinction", function() {
    getAttrs(["d4pool", "pp"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      let pp = parseInt(values.pp,10)||0;
      ++d4pool;
      ++pp;
      setAttrs({
        d4pool: d4pool,
        pp: pp
      });
    });
  });

// make the various "Add XdX" buttons work
  on("clicked:d4add", function() {
    getAttrs(["d4pool"], function(values) {
      let d4pool = parseInt(values.d4pool,10)||0;
      ++d4pool;
      setAttrs({
        d4pool: d4pool,
      });
    });
  });

  on("clicked:d6add", function() {
    getAttrs(["d6pool"], function(values) {
      let d6pool = parseInt(values.d6pool,10)||0;
      ++d6pool;
      setAttrs({
        d6pool: d6pool,
      });
    });
  });

  on("clicked:d8add", function() {
    getAttrs(["d8pool"], function(values) {
      let d8pool = parseInt(values.d8pool,10)||0;
      ++d8pool;
      setAttrs({
        d8pool: d8pool,
      });
    });
  });

  on("clicked:d10add", function() {
    getAttrs(["d10pool"], function(values) {
      let d10pool = parseInt(values.d10pool,10)||0;
      ++d10pool;
      setAttrs({
        d10pool: d10pool,
      });
    });
  });

  on("clicked:d12add", function() {
    getAttrs(["d12pool"], function(values) {
      let d12pool = parseInt(values.d12pool,10)||0;
      ++d12pool;
      setAttrs({
        d12pool: d12pool,
      });
    });
  });

// makes the "Create Asset" button work

  on("clicked:createasset", function() {
    getAttrs(["pp"], function(values) {
      let pp = parseInt(values.pp,10)||0;
      --pp;
      setAttrs({
        pp: pp,
      });
    });
  });
</script>
